# Task ID: 22
# Title: Create SSE Parser for OpenRouter Streaming Responses
# Status: pending
# Dependencies: None
# Priority: high
# Description: Implement a dedicated parser for Server-Sent Events (SSE) to properly handle streaming responses from OpenRouter API.
# Details:
Create a new class `SSEParser` that: 1) Takes a ReadableStream as input, 2) Uses a ReadableStream reader to process chunks as they arrive, 3) Parses individual 'data:' prefixed lines into JSON objects, 4) Handles special messages like '[DONE]' markers, 5) Emits events or callbacks for new data chunks, complete responses, and errors. Replace current `.json()` calls with this streaming approach. Include utility methods for detecting different response types within the stream.

# Test Strategy:
Create unit tests with mock SSE streams containing various response patterns. Verify correct parsing of single chunks, multiple chunks, tool calls, and special markers. Test with malformed data to ensure error handling works properly.
